"""
üíä populate_drugs.py ‚Äî –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ –∏ –¥–≤–∏–∂–µ–Ω–∏–π)

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è (–ø—Ä–∏—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥).
–ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –æ—Ç—á—ë—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ—á–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞.

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:
- –°–æ–∑–¥–∞—ë—Ç 120 –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏, —Ñ–æ—Ä–º–∞–º–∏, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ —Å—Ä–æ–∫–∞–º–∏ –≥–æ–¥–Ω–æ—Å—Ç–∏;
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç 3 –¥–æ 5 –∑–∞–ø–∏—Å–µ–π –æ –¥–≤–∏–∂–µ–Ω–∏—è—Ö (–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ);
- –î–≤–∏–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –¥–∞—Ç–∞–º–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 60 –¥–Ω–µ–π;
- –ö–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–∞–∫ –∞–≤—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –≤ –±–∞–∑–µ).

–ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å:
  python fill_fake_data.py  (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DJANGO_SETTINGS_MODULE)

–í–Ω–∏–º–∞–Ω–∏–µ:
  –°–∫—Ä–∏–ø—Ç –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –Ω—É–∂–Ω–æ–π —Å—Ä–µ–¥–µ (dev/test).
"""

# –ò–º–ø–æ—Ä—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ Python
import os           # –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç.–ø.)
import django       # –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Django ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞
import random       # –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
from datetime import timedelta, date  # –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
from django.utils import timezone     # —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å Django –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ Django, —É–∫–∞–∑—ã–≤–∞—è, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')
django.setup()  # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Django ‚Äî –±–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è meds
from meds.models import Drug, DrugMovement
from django.contrib.auth.models import User  # –∏–º–ø–æ—Ä—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –µ–≥–æ –∫–∞–∫ –∞–≤—Ç–æ—Ä–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞–º–∏)
admin = User.objects.filter(is_superuser=True).first()

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É (–Ω–∞ —Å–µ–≥–æ–¥–Ω—è)
today = date.today()

# –ë–∞–∑–æ–≤—ã–µ —á–∞—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏–π –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ ‚Äî –±—É–¥–µ–º –∏–∑ –Ω–∏—Ö —Å–ª—É—á–∞–π–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –∏–º–µ–Ω–∞
names_base = [
    "–ê–º–æ–∫—Å–∏", "–¶–µ—Ñ—Ç—Ä–∏", "–ö–µ—Ç–æ", "–ü—Ä–µ–¥–∏", "–¢–∏–ª–æ", "–ò–≤–µ—Ä", "–ì–µ–Ω—Ç–∞–º–∏",
    "–¶–∏–ø—Ä–æ", "–§—É—Ä–∞", "–≠–Ω—Ä–æ", "–î–µ–∫—Å–∞", "–ú–∏–ª—å–±–µ", "–°–∏–Ω—É–ª", "–ë–∞–π—Ç—Ä–∏–ª",
    "–†–æ–Ω–∫–æ", "–§–ª–æ—Ä–æ", "–°–µ–¥—É–∫", "–§–ª—É—Ä–∞", "–ö–∞—Ä–±", "–õ–µ–≤–∞–º–∏", "–•–ª–æ—Ä–∞", "–ü–∞–ø–∞–≤"
]

# –í–æ–∑–º–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã –≤—ã–ø—É—Å–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
forms = ["–¢–∞–±–ª–µ—Ç–∫–∏", "–ê–º–ø—É–ª—ã", "–†–∞—Å—Ç–≤–æ—Ä", "–ü–æ—Ä–æ—à–æ–∫", "–ö–∞–ø–ª–∏", "–ò–Ω—ä–µ–∫—Ü–∏—è"]

# –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
manufacturers = ["–í–µ—Ç–§–∞—Ä–º", "–ë–∏–æ–°–∏–Ω—Ç–µ–∑", "–§–∞—Ä–º–í–µ—Ç", "–ó–æ–æ–º–µ–¥–∏–∫–∞", "–ê–≥—Ä–æ–≤–µ—Ç", "–ú–∏–∫—Ä–æ—Ñ–∞—Ä–º"]

# –£–∫–∞–∑—ã–≤–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ —Ö–æ—Ç–∏–º –¥–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
total_drugs = 120

# –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª ‚Äî —Å–æ–∑–¥–∞—ë–º 120 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤
for i in range(total_drugs):
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: "–¶–∏–ø—Ä–æ-47"
    name = f"{random.choice(names_base)}-{random.randint(10,99)}"

    # –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Drug (–ª–µ–∫–∞—Ä—Å—Ç–≤–∞)
    drug = Drug.objects.create(
        name=name,
        form=random.choice(forms),  # —Å–ª—É—á–∞–π–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤—ã–ø—É—Å–∫–∞
        manufacturer=random.choice(manufacturers),  # —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
        batch_number=f"B{1000+i}",  # —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –ø–∞—Ä—Ç–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä: B1000, B1001, ...
        expiration_date=today + timedelta(days=random.randint(-30, 365)),  # —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –∏—Å—Ç—ë–∫)
        quantity=random.randint(5, 200)  # –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ
    )

    # –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ —Å–æ–∑–¥–∞—ë–º 3‚Äì5 —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π (–ø—Ä–∏—Ö–æ–¥ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥)
    for _ in range(random.randint(3, 5)):
        movement_type = random.choice(['in', 'out'])  # –ø—Ä–∏—Ö–æ–¥ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥
        quantity = random.randint(1, 30)  # —Å–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü –ø–æ—Å—Ç—É–ø–∏–ª–æ/—É—à–ª–æ
        note = f"{'–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ' if movement_type == 'in' else '–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ'} #{random.randint(1000,9999)}"  # –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
        date_offset = random.randint(-60, 0)  # —Å–ª—É—á–∞–π–Ω–∞—è –¥–∞—Ç–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 60 –¥–Ω–µ–π
        date_value = timezone.now() + timedelta(days=date_offset)  # –≤—ã—á–∏—Å–ª—è–µ–º –¥–∞—Ç—É —Å–æ–±—ã—Ç–∏—è

        # –°–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ DrugMovement
        DrugMovement.objects.create(
            drug=drug,
            movement_type=movement_type,
            quantity=quantity,
            date=date_value,
            note=note,
            created_by=admin  # —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
        )

# –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ {total_drugs} –ø—Ä–µ–ø–∞—Ä–∞—Ç–æ–≤ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ –∫–∞–∂–¥–æ–º—É.")
